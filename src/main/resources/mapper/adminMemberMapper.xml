<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="adminMember">

    <!--  로그인하는 관리자 아이디에 해당하는 emp_id 를 조회한다.  -->
    <select id="selectEmpId" parameterType="String" resultType="int">
        SELECT emp_id
        FROM tb_employee
        WHERE emp_acct_id = #{id}
    </select>

    <!--  세션에 담긴 empId에 해당하는 관리자 정보 조회  -->
    <select id="selectLoginAdminInfo" resultType="AdminMemberDto">
        SELECT *
        FROM tb_employee
        WHERE emp_id = #{empId}
    </select>

    <select id="selectMemberList" resultType="MemberDto">
        SELECT DATE_FORMAT(m.in_dtm, '%Y-%m-%d') as in_dtm, m.name, m.lgin_id, g.name as mbr_grd_name, m.phone, m.gender, m.birth
        FROM TB_MEMBER m, TB_MEMBER_GRADE g
        WHERE m.mbr_grd = g.mbr_grd_cd
    </select>

</mapper>